<div class="parallax">
  <div class="title">My Subscriptions</div>
</div>
<div class="container" style="margin-top: 4%; padding: 0 80px; min-height: 70%">
  <div class="row">
    <div class="col-lg-8 mb-4" style="margin-left: 4%">
      <div *ngIf="isEmptyboolean === true; then content"></div>
      <ng-template #content
        ><h3 style="color: #728e37">
          You haven't <strong style="color: #274e27">SUBSCRIBED</strong> to any
          produces yet!
        </h3>
        <p class="mt-4" style="font-size: 22px">
          Feel free to look for produces,
          <a routerLink="/find-produce">here!</a>
        </p></ng-template
      >
      <div class="card shadow mb-4" *ngFor="let item of data | keyvalue">
        <div class="card-header p-4" style="background-color: #eaeaea">
          <h4 style="color: #728e37; margin-left: 15px">{{ item.key }}</h4>
        </div>
        <div class="card-body">
          <div
            class="row"
            *ngFor="let obj of item.value"
            style="position: relative"
          >
            <div
              *ngIf="
                obj.produceStatus == 'RIPE';
                then content;
                else other_content
              "
            ></div>
            <ng-template #content
              ><div class="icon-status">
                <img
                  src="/assets/images/s-growing.png"
                  loading="lazy"
                  alt=""
                  ngbToolti="Growing"
                /></div
            ></ng-template>
            <ng-template #other_content
              ><div class="icon-status">
                <img
                  src="/assets/images/s-ripe.png"
                  loading="lazy"
                  alt=""
                  ngbTooltip="Ripe"
                /></div
            ></ng-template>
            <div class="col-1">
              <div
                class="d-flex align-items-center"
                style="padding-left: 20px; margin-right: 20px"
              >
                <img
                  src="http://localhost:8080/api/image/produce-image/{{
                    obj.filename
                  }}"
                  alt=""
                  style="object-fit: cover; width: 35px; height: 35px"
                  class="rounded"
                />
              </div>
            </div>
            <div class="col-md-4">
              <h6>
                <a routerLink="/produce/{{ obj.produceId }}">{{
                  obj.produceName
                }}</a>
              </h6>
            </div>
            <div class="col-md-3">
              <h6>Rs. {{ obj.price }} / {{ obj.measureType }}</h6>
            </div>
            <div class="col-md-2">
              <a class="location-pin">
                <fa-icon
                  [icon]="faLocationDot"
                  class="fab fa-lg cus-icon"
                ></fa-icon>
              </a>
            </div>
            <div class="col-md-2">
              <a (click)="unsubscribe(obj.produceId)" class="subdbutton"
                >Un-Subscribe</a
              >
            </div>
            <hr />
          </div>
        </div>
      </div>
    </div>
    <div class="col-lg-3 mb-4">
      <div class="card" style="background-color: #dddddd">
        <div class="card-body" style="padding-top: 10%; padding-bottom: 10%">
          <div class="card-title" style="color: #4c3113">
            <h5>Your Agro-Profile</h5>
          </div>
          <div style="margin-top: 10%; margin-left: 5%">
            <p>
              <strong style="margin-right: 5%; color: #44571f">{{
                user.produceCount
              }}</strong>
              Agro-produces grown
            </p>
            <p>
              <strong style="margin-right: 5%; color: #44571f">{{
                user.subscriptionCount
              }}</strong>
              Subscriptions
            </p>
            <p>
              <strong style="margin-right: 5%; color: #44571f">0</strong>
              Reviews
            </p>
            <p>
              <strong style="margin-right: 5%; color: #44571f">0</strong>
              Comments
            </p>
            <p>
              <strong style="margin-right: 5%; color: #44571f">{{
                user.friendsCount
              }}</strong>
              Connections
            </p>
          </div>

          <div></div>
        </div>
      </div>
    </div>
  </div>
</div>
