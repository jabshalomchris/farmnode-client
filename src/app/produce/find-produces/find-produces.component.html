<div class="parallax">
  <div class="title">Find Produces Around Me</div>
</div>
<div class="container my-sm-5 border p-0 bg-sec-light shadow-sm">
  <div id="content">
    <form [formGroup]="searchForm" (ngSubmit)="submit(submitBtn)">
      <div class="bg-light p-2 px-md-4 px-1 shadow-sm">
        <div class="d-sm-flex align-items-sm-center py-sm-3 px-md-3 location">
          <input
            type="text"
            id="location"
            [formControlName]="'location'"
            required
            placeholder="Search for your location"
            class="mx-sm-2 mx-3 my-sm-0 my-2 form-control"
          />
          <button
            #submitBtn
            type="submit"
            value="submit"
            class="unique-button btn mx-3 my-sm-0 mb-2"
            style="width: 150px"
          >
            Search
          </button>
        </div>
      </div>
    </form>
    <div class="d-sm-flex py-sm-3 px-md-3">
      <div class="me-sm-2">
        <div id="filter" class="p-2 bg-light ms-md-4 ms-sm-2 border">
          <div class="border-bottom h5 text-uppercase" style="color: #4c3113">
            Options
          </div>

          <div class="box border-bottom">
            <div class="box-label text-uppercase d-flex align-items-center">
              Type of produce
              <button
                class="btn ms-auto"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#inner-box"
                aria-expanded="false"
                aria-controls="inner-box"
              >
                <span class="fas fa-plus"></span>
              </button>
            </div>
            <div id="inner-box" class="collapse show">
              <div class="my-1">
                <div class="form-check">
                  <input
                    class="form-check-input"
                    type="radio"
                    checked
                    value=""
                    name="produceType"
                    id="all"
                    (change)="changeProduceType($event)"
                  />
                  <label class="form-check-label" for="all"> All </label>
                </div>
              </div>
              <div class="my-1">
                <div class="form-check">
                  <input
                    class="form-check-input"
                    type="radio"
                    value="Vegetable"
                    name="produceType"
                    id="Vegetables"
                    (change)="changeProduceType($event)"
                  />
                  <label class="form-check-label" for="Vegetables">
                    Vegetables
                  </label>
                </div>
              </div>
              <div class="my-1">
                <div class="form-check">
                  <input
                    class="form-check-input"
                    type="radio"
                    value="Fruit"
                    name="produceType"
                    id="Fruits"
                    (change)="changeProduceType($event)"
                  />
                  <label class="form-check-label" for="Fruits"> Fruits </label>
                </div>
              </div>

              <div class="my-1">
                <div class="form-check">
                  <input
                    class="form-check-input"
                    type="radio"
                    value="Dairy"
                    name="produceType"
                    id="Farm"
                    (change)="changeProduceType($event)"
                  />
                  <label class="form-check-label" for="Farm">
                    Farm produce
                  </label>
                </div>
              </div>
              <div class="my-1">
                <div class="form-check">
                  <input
                    class="form-check-input"
                    type="radio"
                    value="floriculture"
                    name="produceType"
                    id="floriculture"
                    (change)="changeProduceType($event)"
                  />
                  <label class="form-check-label" for="floriculture">
                    Floriculture
                  </label>
                </div>
              </div>
            </div>
          </div>
          <div class="box border-bottom">
            <div class="box-label text-uppercase d-flex align-items-center">
              Status
            </div>
            <div id="amenities" class="collapse show">
              <div class="my-1">
                <div class="form-check">
                  <input
                    class="form-check-input"
                    type="radio"
                    value=""
                    name="status"
                    id="allStatusrb"
                    checked
                    (change)="changeStatus($event)"
                  />
                  <label class="form-check-label" for="allStatusrb">
                    All
                  </label>
                </div>
              </div>
              <div class="my-1">
                <div class="form-check">
                  <input
                    class="form-check-input"
                    type="radio"
                    value="GROWING"
                    name="status"
                    id="growingrb"
                    (change)="changeStatus($event)"
                  />
                  <label class="form-check-label" for="growingrb">
                    Growing
                  </label>
                </div>
              </div>
              <div class="my-1">
                <div class="form-check">
                  <input
                    class="form-check-input"
                    type="radio"
                    value="RIPE"
                    name="status"
                    id="riperb"
                    (change)="changeStatus($event)"
                  />
                  <label class="form-check-label" for="riperb"> Ripe </label>
                </div>
              </div>
            </div>
          </div>
          <div class="box border-bottom">
            <div class="box-label text-uppercase d-flex align-items-center">
              Price options
            </div>
            <div id="amenities" class="collapse show">
              <div class="my-1">
                <div class="form-check form-switch">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    value="all"
                    id="flexSwitchAll"
                    checked
                    (change)="changeAllPriceSwitch($event)"
                  />
                  <label class="form-check-label" for="flexSwitchCheckChecked"
                    >All</label
                  >
                </div>
              </div>
              <div class="my-1">
                <div class="form-check form-switch">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    value="free"
                    id="flexSwitchFree"
                    (change)="changeFreePriceSwitch($event)"
                  />
                  <label class="form-check-label" for="flexSwitchFree"
                    >Free / Excess</label
                  >
                </div>
              </div>
            </div>
          </div>
          <div class="box border-bottom">
            <div class="box-label text-uppercase d-flex align-items-center">
              Geo Marker filter
            </div>
            <div id="amenities" class="collapse show">
              <div class="my-1">
                <div class="form-check form-switch">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    id="flexSwitchCheckChecked"
                    checked
                    (change)="changeSwitch($event)"
                  />
                  <label class="form-check-label" for="flexSwitchCheckChecked"
                    >Include my produces</label
                  >
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="bg-white p-2 border" style="width: 100%" id="hotels">
        <div id="map" style="min-height: 200px"></div>
      </div>
    </div>
  </div>
</div>

<div class="card topCard mx-auto">
  <div
    class="container-fluid bg-trasparent my-4 p-3"
    style="position: relative"
  >
    <div class="row row-cols-1 row-cols-xs-2 row-cols-sm-4 row-cols-lg-3 g-3">
      <div class="col" *ngFor="let produce of produces$">
        <div class="card">
          <div class="bg">
            <img src="/assets/images/circular-bg.png" loading="lazy" alt="" />
          </div>
          <div
            *ngIf="
              produce.produceStatus == 'RIPE';
              then content;
              else other_content
            "
          ></div>
          <ng-template #content
            ><div class="icon-status">
              <img
                src="/assets/images/s-growing.png"
                loading="lazy"
                alt=""
                ngbTooltip="Growing"
              /></div
          ></ng-template>
          <ng-template #other_content
            ><div class="icon-status">
              <img
                src="/assets/images/s-ripe.png"
                loading="lazy"
                alt=""
                ngbTooltip="Ripe"
              /></div
          ></ng-template>

          <div
            class="card-header text-center"
            style="color: #728e37; font-size: 22px; font-weight: bold"
          >
            {{ produce.produceName }}
          </div>
          <div class="card-body" style="min-height: 60px">
            <div class="row">
              <div class="col-6 col-sm-4">
                <img
                  class="rounded"
                  alt="{{ produce.produceName }}"
                  loading="lazy"
                  style="object-fit: cover; height: 120px; width: 120px"
                  src="http://localhost:8080/api/image/produce-image/{{
                    produce.filename
                  }}"
                  data-holder-rendered="
                  true"
                />
              </div>
              <div class="col-6 col-sm-8">
                <h6 class="text-muted">{{ produce.category }}</h6>
                <h5 class="card-title" style="color: #4c3113">
                  Rs. {{ produce.price }} / {{ produce.measureType }}
                </h5>
                <p class="card-text">
                  {{ produce.description | slice: 0:30 }}...
                </p>
              </div>
            </div>
            <div class="mt-4" style="text-align: right">
              <div
                *ngIf="
                  produce.userName == user;
                  then usersProduce;
                  else othersProduce
                "
              ></div>
              <ng-template #usersProduce
                ><a
                  routerLink="/viewproduce/{{ produce.produceId }}"
                  class="button-10"
                  style="width: 150px; float: right"
                  >View</a
                ></ng-template
              >
              <ng-template #othersProduce
                ><a
                  routerLink="/produce/{{ produce.produceId }}"
                  class="button-10"
                  style="width: 150px; float: right"
                  >View</a
                ></ng-template
              >
            </div>
          </div>
          <div class="card-footer text-muted">
            Grower :
            <span> {{ produce.grower }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
